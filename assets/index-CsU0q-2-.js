(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const c of e.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function l(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerPolicy&&(e.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?e.credentials="include":r.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function n(r){if(r.ep)return;r.ep=!0;const e=l(r);fetch(r.href,e)}})();addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("rows"),t=document.getElementById("columns"),l=document.getElementById("speed"),n=document.getElementById("startButton"),r=document.getElementById("restartButton");let e=parseInt(o.value),c=parseInt(t.value);f(e,c),m(e,c);let s=Array.from({length:e},()=>Array(c).fill(0));s=p(e,c),o.addEventListener("change",()=>{e=parseInt(o.value),s=Array.from({length:e},()=>Array(c).fill(0)),f(e,c),m(e,c)}),t.addEventListener("change",()=>{c=parseInt(t.value),s=Array.from({length:e},()=>Array(c).fill(0)),f(e,c),m(e,c)});const a=document.getElementById("gameField");a.addEventListener("click",i=>{const d=i.target;if(d.classList.contains("cell")){d.classList.toggle("alive");const u=Array.from(a.children).indexOf(d),g=Math.floor(u/parseInt(t.value)),y=u%parseInt(t.value);s[g][y]=s[g][y]===1?0:1}}),n.addEventListener("click",()=>{const i=parseInt(l.value);h(e,c,i)}),r.addEventListener("click",()=>{s=p(parseInt(o.value),parseInt(t.value))})});function h(o,t,l){let n=Array.from({length:o},()=>Array(t).fill(0));document.querySelectorAll(".cell").forEach((a,i)=>{const d=Math.floor(i/t),u=i%t;n[d][u]=a.classList.contains("alive")?1:0});const e=document.getElementById("stopButton");let c=Array.from({length:o},()=>Array(t).fill(0));const s=setInterval(()=>{c=v(n),E(t,c),A(n,c)&&clearInterval(s),[n,c]=L(n,c),e.addEventListener("click",()=>{clearInterval(s)})},l)}function p(o,t){const l=Array.from({length:o},()=>Array.from({length:t},()=>Math.random()<.7?0:1));return l.forEach((n,r)=>{n.forEach((e,c)=>{document.querySelectorAll(".cell")[r*t+c].classList.toggle("alive",e===1)})}),l}function v(o){return o.map((t,l)=>t.map((n,r)=>{const e=I(l,r,o);return n===1&&(e<2||e>3)?0:n===0&&e===3?1:n}))}function I(o,t,l){let n=0;return[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].forEach(([e,c])=>{const s=(o+e+l.length)%l.length,a=(t+c+l[0].length)%l[0].length;n+=l[s][a]}),n}function E(o,t){Array.from(document.querySelectorAll(".cell")).forEach((l,n)=>{const r=Math.floor(n/o),e=n%o;l.classList.toggle("alive",t[r][e]===1)})}function L(o,t){return[t,o]}function A(o,t){return o.every((l,n)=>l.every((r,e)=>o[n][e]===t[n][e]))}function f(o,t){const l=document.getElementById("gameField");l.style.gridTemplateColumns=`repeat(${t}, 1fr)`,l.style.gridTemplateRows=`repeat(${o}, 1fr)`}function m(o,t){const l=document.getElementById("gameField");l.innerHTML="";for(let n=0;n<o;n++)for(let r=0;r<t;r++){const e=document.createElement("div");e.classList.add("cell"),l.appendChild(e)}}
